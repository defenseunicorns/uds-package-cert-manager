includes:
  - setup: ./tasks/setup.yaml
  - common-setup: https://raw.githubusercontent.com/defenseunicorns/uds-common/v0.5.1/tasks/setup.yaml
  - create: ./tasks/create.yaml
  - deploy: ./tasks/deploy.yaml
  - remove: ./tasks/remove.yaml
  - publish: ./tasks/publish.yaml

variables:
  - name: FLAVOR
  - name: CUSTOM_MANIFESTS

tasks:
  - name: default
    actions:
      - task: create:package
      - task: setup:core-slim-dev
      - task: deploy:package
        with:
          options: "--components=deploy-custom-manifests --set custom_manifests=./examples/deploy-custom-manifests.yaml"

  - name: create-pkg
    actions:
      - task: create:package
        with:
          options: ${CREATE_OPTIONS}

  - name: deploy-pkg
    actions:
      - task: deploy:package
        with:
          options: ${DEPLOY_OPTIONS}
